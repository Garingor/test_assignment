{"ast":null,"code":"import _slicedToArray from\"/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LegalEntityList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),legalentities=_useState2[0],setLegalEntity=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,1),setName=_useState4[0];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,1),setSurname=_useState6[0];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,1),setPatronymic=_useState8[0];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,1),setAddress=_useState10[0];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,1),setInn=_useState12[0];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,1),setSeriesPassport=_useState14[0];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,1),setNumberPassport=_useState16[0];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,1),setEmployeeNumber=_useState18[0];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,1),setLegalEntityId=_useState20[0];useEffect(function(){getLegalEntities();},[]);function getLegalEntities(){fetch(\"http://127.0.0.1:8000/api/v1/legalentities\").then(function(result){result.json().then(function(resp){// console.warn(resp)\nsetLegalEntity(resp);setName(resp[0].name);setSurname(resp[0].surname);setPatronymic(resp[0].patronymic);setAddress(resp[0].address);setInn(resp[0].inn);setSeriesPassport(resp[0].seriespassport);setNumberPassport(resp[0].numberpassport);setEmployeeNumber(resp[0].employeenumber);setLegalEntityId(resp[0].id);});});}function deleteLegalEntity(id){fetch(\"http://127.0.0.1:8000/api/v1/legalentities/\".concat(id),{method:'DELETE'}).then(function(result){result.json().then(function(resp){console.warn(resp);getLegalEntities();});});}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u042E\\u0440\\u0438\\u0434\\u0438\\u0447\\u0435\\u0441\\u043A\\u0438\\u0435 \\u043B\\u0438\\u0446\\u0430:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 d-md-flex justify-content-md-end\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-outline-primary\",to:{pathname:\"/legalentities/add\",fromDashboard:false},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0435 \\u044E\\u0440\\u0438\\u0434\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u041D\\u041D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0435\\u0440\\u0438\\u044F \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u043E\\u043B-\\u0432\\u043E \\u043F\\u043E\\u0434\\u0447\\u0438\\u043D\\u0435\\u043D\\u043D\\u044B\\u0445\"})]}),legalentities.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.surname}),/*#__PURE__*/_jsx(\"td\",{children:item.patronymic}),/*#__PURE__*/_jsx(\"td\",{children:item.address}),/*#__PURE__*/_jsx(\"td\",{children:item.inn}),/*#__PURE__*/_jsx(\"td\",{children:item.seriespassport}),/*#__PURE__*/_jsx(\"td\",{children:item.numberpassport}),/*#__PURE__*/_jsx(\"td\",{children:item.employeenumber}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-block\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-sm btn-outline-info me-md-2\",to:{pathname:\"/legalentities/edit/\".concat(item.id),fromDashboard:false},children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:function onClick(){return deleteLegalEntity(item.id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})})]},i);})]})})]})]})});}export default LegalEntityList;","map":{"version":3,"sources":["/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/src/components/LegalEntity/LegalEntityList.js"],"names":["React","useEffect","useState","Link","LegalEntityList","legalentities","setLegalEntity","setName","setSurname","setPatronymic","setAddress","setInn","setSeriesPassport","setNumberPassport","setEmployeeNumber","setLegalEntityId","getLegalEntities","fetch","then","result","json","resp","name","surname","patronymic","address","inn","seriespassport","numberpassport","employeenumber","id","deleteLegalEntity","method","console","warn","pathname","fromDashboard","map","item","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Link} from \"react-router-dom\";\n\nfunction LegalEntityList() {\n  const [legalentities, setLegalEntity] = useState([])\n  const [setName] = useState(\"\");\n  const [setSurname] = useState(\"\");\n  const [setPatronymic] = useState(\"\");\n  const [setAddress] = useState(\"\");\n  const [setInn] = useState(\"\");\n  const [setSeriesPassport] = useState(\"\");\n  const [setNumberPassport] = useState(\"\");\n  const [setEmployeeNumber] = useState(\"\");\n  const [setLegalEntityId]=useState(null)\n\n  useEffect(() => {\n    getLegalEntities();\n  }, [])\n\n  function getLegalEntities() {\n    fetch(\"http://127.0.0.1:8000/api/v1/legalentities\").then((result) => {\n      result.json().then((resp) => {\n        // console.warn(resp)\n        setLegalEntity(resp)\n        setName(resp[0].name)\n        setSurname(resp[0].surname)\n        setPatronymic(resp[0].patronymic)\n        setAddress(resp[0].address)\n        setInn(resp[0].inn)\n        setSeriesPassport(resp[0].seriespassport)\n        setNumberPassport(resp[0].numberpassport)\n        setEmployeeNumber(resp[0].employeenumber)\n        setLegalEntityId(resp[0].id)\n      })\n    })\n  }\n\n  function deleteLegalEntity(id) {\n    fetch(`http://127.0.0.1:8000/api/v1/legalentities/${id}`, {\n      method: 'DELETE'\n    }).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        getLegalEntities()\n      })\n    })\n  }\n\n  return (\n    <div className=\"row\">\n            <div className=\"col-md-12\">\n                <h5>Юридические лица:</h5>\n                    <div className=\"card card-body\">\n                      <div className=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                        <Link className=\"btn btn-outline-primary\" to={{pathname: `/legalentities/add`, fromDashboard: false}}>Добавить новое юридическое лицо</Link>\n                      </div>\n                            <table className=\"table table-sm\">\n                                <tbody>\n                                  <tr>\n                                    <th>ID</th>\n                                    <th>Имя</th>\n                                    <th>Фамилия</th>\n                                    <th>Отчество</th>\n                                    <th>Адрес</th>\n                                    <th>ИНН</th>\n                                    <th>Серия паспорта</th>\n                                    <th>Номер паспорта</th>\n                                    <th>Кол-во подчиненных</th>\n                                  </tr>\n                                  {\n                                    legalentities.map((item, i) =>\n                                      <tr key={i}>\n                                        <td>{item.id}</td>\n                                        <td>{item.name}</td>\n                                        <td>{item.surname}</td>\n                                        <td>{item.patronymic}</td>\n                                        <td>{item.address}</td>\n                                        <td>{item.inn}</td>\n                                        <td>{item.seriespassport}</td>\n                                        <td>{item.numberpassport}</td>\n                                        <td>{item.employeenumber}</td>\n                                        <td>\n                                          <div className=\"d-grid gap-2 d-md-block\">\n                                            <Link className=\"btn btn-sm btn-outline-info me-md-2\" to={{pathname: `/legalentities/edit/${item.id}`, fromDashboard: false}}>Обновить</Link>\n                                            <button className=\"btn btn-sm btn-outline-danger\" onClick={() => deleteLegalEntity(item.id)}>Удалить</button>\n                                          </div>\n                                        </td>\n                                      </tr>\n                                    )\n                                  }\n                                </tbody>\n                            </table>\n                    </div>\n            </div>\n        </div>\n  );\n}\n\nexport default LegalEntityList;"]},"metadata":{},"sourceType":"module"}