{"ast":null,"code":"import _slicedToArray from\"/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RoomList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRoom=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,1),setName=_useState4[0];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,1),setFloor=_useState6[0];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,1),setNumber=_useState8[0];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,1),setRoomId=_useState10[0];useEffect(function(){getRooms();},[]);function getRooms(){fetch(\"http://127.0.0.1:8000/api/v1/rooms\").then(function(result){result.json().then(function(resp){// console.warn(resp)\nsetRoom(resp);setName(resp[0].name);setFloor(resp[0].floor);setNumber(resp[0].number);setRoomId(resp[0].id);});});}function deleteRoom(id){fetch(\"http://127.0.0.1:8000/api/v1/rooms/\".concat(id),{method:'DELETE'}).then(function(result){result.json().then(function(resp){console.warn(resp);getRooms();});});}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u041F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 d-md-flex justify-content-md-end\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-outline-primary\",to:{pathname:\"/rooms/add\",fromDashboard:false},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0435 \\u043F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0435\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u042D\\u0442\\u0430\\u0436\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]}),rooms.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.floor}),/*#__PURE__*/_jsx(\"td\",{children:item.number}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-block\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-sm btn-outline-info me-md-2\",to:{pathname:\"/rooms/edit/\".concat(item.id),fromDashboard:false},children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:function onClick(){return deleteRoom(item.id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})})]},i);})]})})]})]})});}export default RoomList;","map":{"version":3,"sources":["/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/src/components/Room/RoomList.js"],"names":["React","useEffect","useState","Link","RoomList","rooms","setRoom","setName","setFloor","setNumber","setRoomId","getRooms","fetch","then","result","json","resp","name","floor","number","id","deleteRoom","method","console","warn","pathname","fromDashboard","map","item","i"],"mappings":"qKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,sCAAP,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,wFAEA,QAASC,CAAAA,QAAT,EAAoB,CAClB,cAAyBF,QAAQ,CAAC,EAAD,CAAjC,wCAAOG,KAAP,eAAcC,OAAd,eACA,eAAkBJ,QAAQ,CAAC,EAAD,CAA1B,yCAAOK,OAAP,eACA,eAAmBL,QAAQ,CAAC,EAAD,CAA3B,yCAAOM,QAAP,eACA,eAAoBN,QAAQ,CAAC,EAAD,CAA5B,yCAAOO,SAAP,eACA,eAAkBP,QAAQ,CAAC,IAAD,CAA1B,0CAAOQ,SAAP,gBAEAT,SAAS,CAAC,UAAM,CACdU,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIA,QAASA,CAAAA,QAAT,EAAoB,CAClBC,KAAK,CAAC,oCAAD,CAAL,CAA4CC,IAA5C,CAAiD,SAACC,MAAD,CAAY,CAC3DA,MAAM,CAACC,IAAP,GAAcF,IAAd,CAAmB,SAACG,IAAD,CAAU,CAC3B;AACAV,OAAO,CAACU,IAAD,CAAP,CACAT,OAAO,CAACS,IAAI,CAAC,CAAD,CAAJ,CAAQC,IAAT,CAAP,CACAT,QAAQ,CAACQ,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAT,CAAR,CACAT,SAAS,CAACO,IAAI,CAAC,CAAD,CAAJ,CAAQG,MAAT,CAAT,CACAT,SAAS,CAACM,IAAI,CAAC,CAAD,CAAJ,CAAQI,EAAT,CAAT,CACD,CAPD,EAQD,CATD,EAUD,CAED,QAASC,CAAAA,UAAT,CAAoBD,EAApB,CAAwB,CACtBR,KAAK,8CAAuCQ,EAAvC,EAA6C,CAChDE,MAAM,CAAE,QADwC,CAA7C,CAAL,CAEGT,IAFH,CAEQ,SAACC,MAAD,CAAY,CAClBA,MAAM,CAACC,IAAP,GAAcF,IAAd,CAAmB,SAACG,IAAD,CAAU,CAC3BO,OAAO,CAACC,IAAR,CAAaR,IAAb,EACAL,QAAQ,GACT,CAHD,EAID,CAPD,EAQD,CAED,mBACE,YAAK,SAAS,CAAC,KAAf,uBACQ,aAAK,SAAS,CAAC,WAAf,wBACI,+EADJ,cAEQ,aAAK,SAAS,CAAC,gBAAf,wBACE,YAAK,SAAS,CAAC,+CAAf,uBACE,KAAC,IAAD,EAAM,SAAS,CAAC,yBAAhB,CAA0C,EAAE,CAAE,CAACc,QAAQ,aAAT,CAAyBC,aAAa,CAAE,KAAxC,CAA9C,oJADF,EADF,cAIQ,cAAO,SAAS,CAAC,gBAAjB,uBACI,sCACE,mCACE,0BADF,cAEE,wEAFF,cAGE,gDAHF,cAIE,sDAJF,cAKE,wEALF,GADF,CASIrB,KAAK,CAACsB,GAAN,CAAU,SAACC,IAAD,CAAOC,CAAP,qBACR,mCACE,oBAAKD,IAAI,CAACR,EAAV,EADF,cAEE,oBAAKQ,IAAI,CAACX,IAAV,EAFF,cAGE,oBAAKW,IAAI,CAACV,KAAV,EAHF,cAIE,oBAAKU,IAAI,CAACT,MAAV,EAJF,cAKE,iCACE,aAAK,SAAS,CAAC,yBAAf,wBACE,KAAC,IAAD,EAAM,SAAS,CAAC,qCAAhB,CAAsD,EAAE,CAAE,CAACM,QAAQ,uBAAiBG,IAAI,CAACR,EAAtB,CAAT,CAAqCM,aAAa,CAAE,KAApD,CAA1D,8DADF,cAEE,eAAQ,SAAS,CAAC,+BAAlB,CAAkD,OAAO,CAAE,yBAAML,CAAAA,UAAU,CAACO,IAAI,CAACR,EAAN,CAAhB,EAA3D,wDAFF,GADF,EALF,GAASS,CAAT,CADQ,EAAV,CATJ,GADJ,EAJR,GAFR,GADR,EADF,CAuCD,CAED,cAAezB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Link} from \"react-router-dom\";\n\nfunction RoomList() {\n  const [rooms, setRoom] = useState([])\n  const [setName] = useState(\"\");\n  const [setFloor] = useState(\"\");\n  const [setNumber] = useState(\"\");\n  const [setRoomId]=useState(null)\n\n  useEffect(() => {\n    getRooms();\n  }, [])\n\n  function getRooms() {\n    fetch(\"http://127.0.0.1:8000/api/v1/rooms\").then((result) => {\n      result.json().then((resp) => {\n        // console.warn(resp)\n        setRoom(resp)\n        setName(resp[0].name)\n        setFloor(resp[0].floor)\n        setNumber(resp[0].number)\n        setRoomId(resp[0].id)\n      })\n    })\n  }\n\n  function deleteRoom(id) {\n    fetch(`http://127.0.0.1:8000/api/v1/rooms/${id}`, {\n      method: 'DELETE'\n    }).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        getRooms()\n      })\n    })\n  }\n\n  return (\n    <div className=\"row\">\n            <div className=\"col-md-12\">\n                <h5>Помещения:</h5>\n                    <div className=\"card card-body\">\n                      <div className=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                        <Link className=\"btn btn-outline-primary\" to={{pathname: `/rooms/add`, fromDashboard: false}}>Добавить новое помещение</Link>\n                      </div>\n                            <table className=\"table table-sm\">\n                                <tbody>\n                                  <tr>\n                                    <th>ID</th>\n                                    <th>Название</th>\n                                    <th>Этаж</th>\n                                    <th>Номер</th>\n                                    <th>Действия</th>\n                                  </tr>\n                                  {\n                                    rooms.map((item, i) =>\n                                      <tr key={i}>\n                                        <td>{item.id}</td>\n                                        <td>{item.name}</td>\n                                        <td>{item.floor}</td>\n                                        <td>{item.number}</td>\n                                        <td>\n                                          <div className=\"d-grid gap-2 d-md-block\">\n                                            <Link className=\"btn btn-sm btn-outline-info me-md-2\" to={{pathname: `/rooms/edit/${item.id}`, fromDashboard: false}}>Обновить</Link>\n                                            <button className=\"btn btn-sm btn-outline-danger\" onClick={() => deleteRoom(item.id)}>Удалить</button>\n                                          </div>\n                                        </td>\n                                      </tr>\n                                    )\n                                  }\n                                </tbody>\n                            </table>\n                    </div>\n            </div>\n        </div>\n  );\n}\n\nexport default RoomList;"]},"metadata":{},"sourceType":"module"}