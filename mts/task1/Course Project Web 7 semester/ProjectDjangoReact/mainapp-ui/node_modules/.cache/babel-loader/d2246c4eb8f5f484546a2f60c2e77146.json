{"ast":null,"code":"import _slicedToArray from\"/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),employees=_useState2[0],setEmployee=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,1),setName=_useState4[0];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,1),setSurname=_useState6[0];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,1),setPatronymic=_useState8[0];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,1),setAddress=_useState10[0];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,1),setInn=_useState12[0];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,1),setSeriesPassport=_useState14[0];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,1),setNumberPassport=_useState16[0];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,1),setPosition=_useState18[0];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,1),setLegalEntity=_useState20[0];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,1),setEmployeeId=_useState22[0];useEffect(function(){getEmployees();},[]);function getEmployees(){fetch(\"http://127.0.0.1:8000/api/v1/employees\").then(function(result){result.json().then(function(resp){// console.warn(resp)\nsetEmployee(resp);setName(resp[0].name);setSurname(resp[0].surname);setPatronymic(resp[0].patronymic);setAddress(resp[0].address);setInn(resp[0].inn);setSeriesPassport(resp[0].seriespassport);setNumberPassport(resp[0].numberpassport);setPosition(resp[0].position);setLegalEntity(resp[0].legalentity);setEmployeeId(resp[0].id);});});}function deleteEmployee(id){fetch(\"http://127.0.0.1:8000/api/v1/employees/\".concat(id),{method:'DELETE'}).then(function(result){result.json().then(function(resp){console.warn(resp);getEmployees();});});}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0438:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 d-md-flex justify-content-md-end\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-outline-primary\",to:{pathname:\"/employees/add\",fromDashboard:false},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\"})}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0410\\u0434\\u0440\\u0435\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u041D\\u041D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0435\\u0440\\u0438\\u044F \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0438\\u043A\"})]}),employees.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:item.surname}),/*#__PURE__*/_jsx(\"td\",{children:item.patronymic}),/*#__PURE__*/_jsx(\"td\",{children:item.address}),/*#__PURE__*/_jsx(\"td\",{children:item.inn}),/*#__PURE__*/_jsx(\"td\",{children:item.seriespassport}),/*#__PURE__*/_jsx(\"td\",{children:item.numberpassport}),/*#__PURE__*/_jsx(\"td\",{children:item.position}),/*#__PURE__*/_jsx(\"td\",{children:item.legalentity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2 d-md-block\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-sm btn-outline-info me-md-2\",to:{pathname:\"/employees/edit/\".concat(item.id),fromDashboard:false},children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:function onClick(){return deleteEmployee(item.id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})})]},i);})]})})]})]})});}export default EmployeeList;","map":{"version":3,"sources":["/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/src/components/Employee/EmployeeList.js"],"names":["React","useEffect","useState","Link","EmployeeList","employees","setEmployee","setName","setSurname","setPatronymic","setAddress","setInn","setSeriesPassport","setNumberPassport","setPosition","setLegalEntity","setEmployeeId","getEmployees","fetch","then","result","json","resp","name","surname","patronymic","address","inn","seriespassport","numberpassport","position","legalentity","id","deleteEmployee","method","console","warn","pathname","fromDashboard","map","item","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Link} from \"react-router-dom\";\n\nfunction EmployeeList() {\n  const [employees, setEmployee] = useState([])\n  const [setName] = useState(\"\");\n  const [setSurname] = useState(\"\");\n  const [setPatronymic] = useState(\"\");\n  const [setAddress] = useState(\"\");\n  const [setInn] = useState(\"\");\n  const [setSeriesPassport] = useState(\"\");\n  const [setNumberPassport] = useState(\"\");\n  const [setPosition] = useState(\"\");\n  const [setLegalEntity] = useState(\"\");\n  const [setEmployeeId]=useState(null)\n\n  useEffect(() => {\n    getEmployees();\n  }, [])\n\n  function getEmployees() {\n    fetch(\"http://127.0.0.1:8000/api/v1/employees\").then((result) => {\n      result.json().then((resp) => {\n        // console.warn(resp)\n        setEmployee(resp)\n        setName(resp[0].name)\n        setSurname(resp[0].surname)\n        setPatronymic(resp[0].patronymic)\n        setAddress(resp[0].address)\n        setInn(resp[0].inn)\n        setSeriesPassport(resp[0].seriespassport)\n        setNumberPassport(resp[0].numberpassport)\n        setPosition(resp[0].position)\n        setLegalEntity(resp[0].legalentity)\n        setEmployeeId(resp[0].id)\n      })\n    })\n  }\n\n  function deleteEmployee(id) {\n    fetch(`http://127.0.0.1:8000/api/v1/employees/${id}`, {\n      method: 'DELETE'\n    }).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        getEmployees()\n      })\n    })\n  }\n\n  return (\n    <div className=\"row\">\n            <div className=\"col-md-12\">\n                <h5>Сотрудники:</h5>\n                    <div className=\"card card-body\">\n                      <div className=\"d-grid gap-2 d-md-flex justify-content-md-end\">\n                        <Link className=\"btn btn-outline-primary\" to={{pathname: `/employees/add`, fromDashboard: false}}>Добавить нового сотрудника</Link>\n                      </div>\n                            <table className=\"table table-sm\">\n                                <tbody>\n                                  <tr>\n                                    <th>ID</th>\n                                    <th>Имя</th>\n                                    <th>Фамилия</th>\n                                    <th>Отчество</th>\n                                    <th>Адрес</th>\n                                    <th>ИНН</th>\n                                    <th>Серия паспорта</th>\n                                    <th>Номер паспорта</th>\n                                    <th>Должность</th>\n                                    <th>Начальник</th>\n                                  </tr>\n                                  {\n                                    employees.map((item, i) =>\n                                      <tr key={i}>\n                                        <td>{item.id}</td>\n                                        <td>{item.name}</td>\n                                        <td>{item.surname}</td>\n                                        <td>{item.patronymic}</td>\n                                        <td>{item.address}</td>\n                                        <td>{item.inn}</td>\n                                        <td>{item.seriespassport}</td>\n                                        <td>{item.numberpassport}</td>\n                                        <td>{item.position}</td>\n                                        <td>{item.legalentity}</td>\n                                        <td>\n                                          <div className=\"d-grid gap-2 d-md-block\">\n                                            <Link className=\"btn btn-sm btn-outline-info me-md-2\" to={{pathname: `/employees/edit/${item.id}`, fromDashboard: false}}>Обновить</Link>\n                                            <button className=\"btn btn-sm btn-outline-danger\" onClick={() => deleteEmployee(item.id)}>Удалить</button>\n                                          </div>\n                                        </td>\n                                      </tr>\n                                    )\n                                  }\n                                </tbody>\n                            </table>\n                    </div>\n            </div>\n        </div>\n  );\n}\n\nexport default EmployeeList;"]},"metadata":{},"sourceType":"module"}