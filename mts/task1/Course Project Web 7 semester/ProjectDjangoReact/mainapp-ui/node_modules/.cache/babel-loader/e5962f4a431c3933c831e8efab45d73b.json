{"ast":null,"code":"import _slicedToArray from\"/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeeUpdate(){var _useState=useState([]),_useState2=_slicedToArray(_useState,1),setEmployee=_useState2[0];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),surname=_useState6[0],setSurname=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),patronymic=_useState8[0],setPatronymic=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),address=_useState10[0],setAddress=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),inn=_useState12[0],setInn=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),seriespassport=_useState14[0],setSeriesPassport=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),numberpassport=_useState16[0],setNumberPassport=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),position=_useState18[0],setPosition=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),legalentity=_useState20[0],setLegalEntity=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),EmployeeId=_useState22[0],setEmployeeId=_useState22[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){getEmployees();},[]);function getEmployees(){fetch(\"http://127.0.0.1:8000/api/v1/employees/\".concat(id,\"/\")).then(function(result){result.json().then(function(resp){// console.warn(resp)\nsetEmployee(resp);setName(resp[0].name);setSurname(resp[0].surname);setPatronymic(resp[0].patronymic);setAddress(resp[0].address);setInn(resp[0].inn);setSeriesPassport(resp[0].seriespassport);setNumberPassport(resp[0].numberpassport);setPosition(resp[0].position);setLegalEntity(resp[0].legalentity);setEmployeeId(resp[0].id);});});}function updateEmployee(){var employee={name:name,surname:surname,patronymic:patronymic,address:address,inn:inn,seriespassport:seriespassport,numberpassport:numberpassport,position:position,legalentity:legalentity};//console.warn(\"employee\",employee)\nfetch(\"http://127.0.0.1:8000/api/v1/employees/\".concat(EmployeeId,\"/\"),{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},redirect:\"follow\",body:JSON.stringify(employee)}).then(function(result){result.json().then(function(resp){console.warn(resp);getEmployees();});});}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0435:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0418\\u043C\\u044F: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){setName(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:surname,onChange:function onChange(e){setSurname(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:patronymic,onChange:function onChange(e){setPatronymic(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0410\\u0434\\u0440\\u0435\\u0441: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:address,onChange:function onChange(e){setAddress(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0418\\u041D\\u041D: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inn,onChange:function onChange(e){setInn(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0421\\u0435\\u0440\\u0438\\u044F \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:seriespassport,onChange:function onChange(e){setSeriesPassport(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043F\\u0430\\u0441\\u043F\\u043E\\u0440\\u0442\\u0430: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:numberpassport,onChange:function onChange(e){setNumberPassport(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0414\\u043E\\u043B\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:position,onChange:function onChange(e){setPosition(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041D\\u0430\\u0447\\u0430\\u043B\\u044C\\u043D\\u0438\\u043A: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:legalentity,onChange:function onChange(e){setLegalEntity(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-info\",onClick:updateEmployee,children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0435\"})]})]})})});}export default EmployeeUpdate;","map":{"version":3,"sources":["/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/src/components/Employee/EmployeeUpdate.js"],"names":["React","useEffect","useState","useParams","EmployeeUpdate","setEmployee","name","setName","surname","setSurname","patronymic","setPatronymic","address","setAddress","inn","setInn","seriespassport","setSeriesPassport","numberpassport","setNumberPassport","position","setPosition","legalentity","setLegalEntity","EmployeeId","setEmployeeId","id","getEmployees","fetch","then","result","json","resp","updateEmployee","employee","method","headers","redirect","body","JSON","stringify","console","warn","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useParams } from \"react-router-dom\";\n\n\nfunction EmployeeUpdate() {\n  const [setEmployee] = useState([])\n  const [name, setName] = useState(\"\");\n  const [surname, setSurname] = useState(\"\");\n  const [patronymic, setPatronymic] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [inn, setInn] = useState(\"\");\n  const [seriespassport, setSeriesPassport] = useState(\"\");\n  const [numberpassport, setNumberPassport] = useState(\"\");\n  const [position, setPosition] = useState(\"\");\n  const [legalentity, setLegalEntity] = useState(\"\");\n  const [EmployeeId,setEmployeeId]=useState(null)\n\n  const { id } = useParams();\n\n  useEffect(() => {\n    getEmployees();\n  }, [])\n\n  function getEmployees() {\n    fetch(`http://127.0.0.1:8000/api/v1/employees/${id}/`).then((result) => {\n      result.json().then((resp) => {\n        // console.warn(resp)\n        setEmployee(resp)\n        setName(resp[0].name)\n        setSurname(resp[0].surname)\n        setPatronymic(resp[0].patronymic)\n        setAddress(resp[0].address)\n        setInn(resp[0].inn)\n        setSeriesPassport(resp[0].seriespassport)\n        setNumberPassport(resp[0].numberpassport)\n        setPosition(resp[0].position)\n        setLegalEntity(resp[0].legalentity)\n        setEmployeeId(resp[0].id)\n      })\n    })\n  }\n\n  function updateEmployee()\n  {\n    const employee = { name, surname, patronymic, address, inn, seriespassport, numberpassport, position, legalentity  };\n    //console.warn(\"employee\",employee)\n    fetch(`http://127.0.0.1:8000/api/v1/employees/${EmployeeId}/`, {\n      method: 'PUT',\n      headers:{\n        'Accept':'application/json',\n        'Content-Type':'application/json'\n      },\n      redirect: \"follow\",\n      body:JSON.stringify(employee)\n    }).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        getEmployees()\n      })\n    })\n  }\n\n  return (\n    <div className=\"row\">\n            <div className=\"col-md-12\">\n                <div className=\"card card-body\">\n                    <h5>Обновите данные о сотруднике:</h5>\n                        <br/>\n                            <div>\n                              <label>Имя: <input type=\"text\" value={name} onChange={(e)=>{setName(e.target.value)}} /></label> <br /><br />\n                              <label>Фамилия: <input type=\"text\" value={surname} onChange={(e)=>{setSurname(e.target.value)}} /></label> <br /><br />\n                              <label>Отчество: <input type=\"text\" value={patronymic}  onChange={(e)=>{setPatronymic(e.target.value)}} /></label> <br /><br />\n                              <label>Адрес: <input type=\"text\" value={address}  onChange={(e)=>{setAddress(e.target.value)}} /></label> <br /><br />\n                              <label>ИНН: <input type=\"text\" value={inn}  onChange={(e)=>{setInn(e.target.value)}} /></label> <br /><br />\n                              <label>Серия паспорта: <input type=\"text\" value={seriespassport}  onChange={(e)=>{setSeriesPassport(e.target.value)}} /></label> <br /><br />\n                              <label>Номер паспорта: <input type=\"text\" value={numberpassport}  onChange={(e)=>{setNumberPassport(e.target.value)}} /></label> <br /><br />\n                              <label>Должность: <input type=\"text\" value={position}  onChange={(e)=>{setPosition(e.target.value)}} /></label> <br /><br />\n                              <label>Начальник: <input type=\"text\" value={legalentity}  onChange={(e)=>{setLegalEntity(e.target.value)}} /></label> <br /><br />\n                              <button className=\"btn btn-sm btn-outline-info\" onClick={updateEmployee } >Обновить данные о сотруднике</button>\n                            </div>\n                </div>\n            </div>\n        </div>\n  );\n}\n\nexport default EmployeeUpdate;"]},"metadata":{},"sourceType":"module"}