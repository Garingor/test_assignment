{"ast":null,"code":"import _slicedToArray from\"/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.min.css';import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RoomUpdate(){var _useState=useState([]),_useState2=_slicedToArray(_useState,1),setRoom=_useState2[0];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),floor=_useState6[0],setFloor=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),number=_useState8[0],setNumber=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),RoomId=_useState10[0],setRoomId=_useState10[1];var _useParams=useParams(),id=_useParams.id;useEffect(function(){getRooms();},[]);function getRooms(){fetch(\"http://127.0.0.1:8000/api/v1/rooms/\".concat(id,\"/\")).then(function(result){result.json().then(function(resp){console.warn(resp);setRoom(resp);setName(resp.name);setFloor(resp.floor);setNumber(resp.number);setRoomId(resp.id);});});}function updateRoom(){var room={name:name,floor:floor,number:number};//console.warn(\"room\", room)\nfetch(\"http://127.0.0.1:8000/api/v1/rooms/\".concat(RoomId,\"/\"),{method:'PATCH',headers:{'Accept':'application/json','Content-Type':'application/json'},redirect:\"follow\",body:JSON.stringify(room)}).then(function(result){result.json().then(function(resp){console.warn(resp);getRooms();});});}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u043F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:function onChange(e){setName(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u042D\\u0442\\u0430\\u0436: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:floor,onChange:function onChange(e){setFloor(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041D\\u043E\\u043C\\u0435\\u0440: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:number,onChange:function onChange(e){setNumber(e.target.value);}})]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-info\",onClick:updateRoom,children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E \\u043F\\u043E\\u043C\\u0435\\u0449\\u0435\\u043D\\u0438\\u0438\"})]})]})})});}export default RoomUpdate;","map":{"version":3,"sources":["/Users/egor/Documents/GitHub/BMSTU_WEB_7_sem_2021/ProjectDjangoReact/mainapp-ui/src/components/Room/RoomUpdate.js"],"names":["React","useEffect","useState","useParams","RoomUpdate","setRoom","name","setName","floor","setFloor","number","setNumber","RoomId","setRoomId","id","getRooms","fetch","then","result","json","resp","console","warn","updateRoom","room","method","headers","redirect","body","JSON","stringify","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { useParams } from \"react-router-dom\";\n\n\nfunction RoomUpdate() {\n  const [setRoom] = useState([])\n  const [name, setName] = useState(\"\");\n  const [floor, setFloor] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n  const [RoomId,setRoomId]=useState(null)\n\n  const { id } = useParams();\n\n  useEffect(() => {\n    getRooms();\n  },[])\n\n  function getRooms() {\n    fetch(`http://127.0.0.1:8000/api/v1/rooms/${id}/`).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        setRoom(resp)\n        setName(resp.name)\n        setFloor(resp.floor)\n        setNumber(resp.number)\n        setRoomId(resp.id)\n      })\n    })\n  }\n\n  function updateRoom()\n  {\n    let room = { name, floor, number }\n    //console.warn(\"room\", room)\n    fetch(`http://127.0.0.1:8000/api/v1/rooms/${RoomId}/`, {\n      method: 'PATCH',\n      headers:{\n        'Accept':'application/json',\n        'Content-Type':'application/json'\n      },\n      redirect: \"follow\",\n      body:JSON.stringify(room)\n    }).then((result) => {\n      result.json().then((resp) => {\n        console.warn(resp)\n        getRooms()\n      })\n    })\n  }\n  return (\n    <div className=\"row\">\n            <div className=\"col-md-12\">\n                <div className=\"card card-body\">\n                    <h5>Обновите данные о помещении:</h5>\n                        <br/>\n                            <div>\n                              <label>Название: <input type=\"text\" value={name} onChange={(e)=>{setName(e.target.value)}} /></label> <br /><br />\n                              <label>Этаж: <input type=\"text\" value={floor} onChange={(e)=>{setFloor(e.target.value)}} /></label> <br /><br />\n                              <label>Номер: <input type=\"text\" value={number}  onChange={(e)=>{setNumber(e.target.value)}} /></label> <br /><br />\n                              <button className=\"btn btn-sm btn-outline-info\" onClick={updateRoom} >Обновить данные о помещении</button>\n                            </div>\n                </div>\n            </div>\n        </div>\n  );\n}\n\nexport default RoomUpdate;"]},"metadata":{},"sourceType":"module"}